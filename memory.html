<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<!-- Parte del tempale -->
	<script type="text/javascript" src="comun/jquery.js"></script>
	<script type="text/javascript" src="comun/comun.js"></script>
	<link rel="stylesheet" type="text/css" href="comun/comun.css">
<!-- Fin parte del tempale -->
	<script type="application/javascript" src="js/codigo.js"></script>
	<link rel="stylesheet" type="text/css" href="css/style.css" />

<script type="application/javascript">
var img1=null;
var img2=null;
var contador=null;

function removeBackground(img){
	$(".btnMemory").css({backgroundImage:'none'});
	console.log("img remove:",img);
}

function removeImg(img){
	$("#"+img).remove();
}


/*function fillTemplate2(place,temp, elemets){

    $(elemets).each(function(index,e){
        t=$(temp).clone();
        $(t).attr('id',e);
        $(t).prop("hidden",false);
        //$(t).css('display', 'block');
        $(t).css('display', 'inline');
        $(place).append(t);
       // $(place).append("<br/>");
        
    });
}
*/

function fillTemplate2(place,temp, config){
	var elements = config[0];
	var allElements = [];
	for (var x=1; x<3; x++){
	//$(elements).each(function(ind,element){
		//console.log("ind: "+ind);
		//ind=ind+1;
		//console.log("elementos: "+element[ind]);
		var group = elements[x];
		for (var i=0; i<2; i++){
		//$(element).each(function(index,e){
	        t=$(temp).clone();
	        $(t).attr('id',(x*10)+i);
	        $(t).attr('name',group[i]);
	        $(t).prop("hidden",false);
	        $(t).css('display', 'inline');
	        //$(place).append(t);
	        allElements.push(t);
		}
		$(place).append(allElements);
	}
}
function stopAudio(){
	$.each($('audio'), function () {
		this.pause();
		this.currentTime = 0;
		});
}

function functInit(conf,x){
	console.log("Configuracion:",conf);
	contador=conf.length/2;
	//desordenado=disorder(conf)
	fillTemplate2("#contenedor","#template",conf)
	setImage();
	 
	/* $(".btnMemory").click(function(){
		stopAudio();	
		$(this).find("audio")[0].play();
	});
	$("#pause").click(function(){
		stopAudio();
	});
	 */
}

function areEqual(im1,im2){
	console.log("compare: "+im1+" con:"+ im2);
	if(im1==im2){return false;}
	x=Math.floor(parseInt(im1)/10);
	y=Math.floor(parseInt(im2)/10);
	if(x==y){return true;}
	return false;
}

function setImage(){
	$('.imgMemory').click(function(){
		$(this).css({backgroundImage : 'url(images/activities/' + $(this).attr("name") + '.jpg)'});
		if(img1==null){
			img1=$(this).attr("id");
			console.log("valor:"+$(this));
			}
		else{
			img2=$(this).attr("id");
			if(areEqual(img1,img2)){
					window.setTimeout(removeImg, 1000,img1);
					window.setTimeout(removeImg, 1000,img2);
				contador=contador-1;
				if(contador==0){
					cartelFelicitaciones();
					//$("#alertOk").delay( 1100 ).fadeIn( 400 )
				}
			}
			else{
				console.log('img1:',img1)
				console.log($('#'+img1))
				window.setTimeout(removeBackground, 1000,img1);
			}
			img1=null;
			img2=null;
			
		}
	});
}

$(document).ready(function() {
	
	
	ejercicio=function(){
		var conf;
		conf=getConfig(1,functInit);	
	}
	
	
	
});


</script>


<title>Memory</title>
</head>
<body>
<header></header>
<div class="container">
	<article>	
		<div id="contenedor" class="divMemory">
			<button id="template" style="display:none" class="btn primary bg btnMemory imgMemory"></button>
			
			
			<!-- button id="play"> PLAY
				<audio id="p" src="audio/p2.mp3" type="audio/mp3"></audio>
			</button>
			<button id="play2"> PLAY2
				<audio id="p2" src="audio/prueba.mp3" type="audio/mp3"></audio>
			</button>
			<button id="pause"> PAUSE</button> -->
		</div>
		
		
		

		
	</article>		
</div>
<div id="alertOk" class="alert-box success" hidden="True">
			<span>Felicitaciones </span>
			</br><img class="imagenSucced" src="images/caraContenta.jpg">
			</br>Has completado muy bien tu ejercicio
</div>
<footer></footer>
</body>
</html>